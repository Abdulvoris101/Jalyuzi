import{a as I,D as z,l as O,m as T,p as b,E as f,j as N,r as y,o as a,b as o,f as r,w as h,e as s,t as d,F as w,s as C,c as B,v as k,G as U,P as p,H as M,I as G,k as v,z as J,B as D,C as V}from"./entry.5dbf4d12.js";import{_ as q}from"./Pagination.368333bd.js";const A={data(){return{category_name:"",subcategories:[],subcategory_status:!1,height:"150",width:"100",overall_price:"",showFilterStatus:!1,not_product:"\u041F\u0440\u043E\u0434\u0443\u043A\u0442\u044B \u043D\u0435\u0442 ):",is_data:!1,category_products:[],showPagination:!0,type:"category"}},computed:{getId(){return z().params.id},...O(p,U),...T(p,["total_c","page_size_c","baseUrl"])},async created(){this.getCategoryProductsOn(this.getId,1),this.getCategoryProducts(this.getId,1),this.getSubcategories(),this.getCategory()},methods:{...b(p,["getCategoryProducts"]),changeMyProducts(t){t.value.length>=1?(this.category_products=t.value,this.inTheCart(),this.is_data=!0,this.showPagination=!1):(this.category_products=[],this.is_data=!1,this.showPagination=!0)},inTheCart(){for(let t=0;t<this.category_products.length;t++){let n=window.localStorage.getItem("product"+this.category_products[t].id);JSON.parse(n)==null?this.category_products[t].inCart=!1:this.category_products[t].inCart=!0}},async getCategoryProductsOn(t,n){let{data:i,pending:m,error:c}=await f("cat",()=>$fetch(`${this.baseUrl}/api/products/?category=${t}&page=${n}`),{initialCache:!1});this.showPagination=!0,i.value.results.length>=1?(this.is_data=!0,this.category_products=i.value.results,this.inTheCart()):(this.category_products=[],this.is_data=!1)},closeFilter(){this.showFilterStatus=!this.showFilterStatus},showFilter(){this.showFilterStatus=!this.showFilterStatus},...b(p,["addToCart","increaseCart","inCategoryCart"]),async getProduct(t){const{data:n}=await N(`${this.baseUrl}/api/product/${t}`,{initialCache:!1},"$ZsG0U0iQDG");return n.value.inCart=!0,n.value},loadProducts(t){this.getCategoryProductsOn(this.getId,t),this.$router.push({path:"",query:{page:t}})},toBuy(t){let n=this.getProduct(t),i;n.then(m=>{i=m;let c=parseInt(i.price_sum),l=this.width/100*(this.height/100);if(this.overall_price=parseInt(c*l),i.type_id==!0){let u={id:i.id,width:this.width/100,height:this.height/100,overall_price:this.overall_price,type_id:i.type_id},_=JSON.stringify(u);this.addToCart(_,i.id),this.increaseCart()}else{let u={id:i.id,width:this.width/100,height:this.height/100,overall_price:this.overall_price,type_id:"None"},_=JSON.stringify(u);this.addToCart(_,i.id),this.increaseCart()}})},async getSubcategories(){const{data:t}=await f("subcategory",()=>$fetch(`${this.baseUrl}/api/subcategory/`));this.subcategories=t.value},async getCategory(){const{data:t,error:n}=await f("category",()=>$fetch(`${this.baseUrl}/api/category/${this.getId}/`,{headers:M()}),{initialCache:!1});this.category_name=t.value.name,t.value.subcategories.length>1?this.subcategory_status=!0:this.subcategory_status=!1}}},P=t=>(D("data-v-ffa62a1b"),t=t(),V(),t),E={id:"products"},H={class:"row gx-0"},L={class:"col-lg-3"},R={class:"col-lg-9"},$={class:"main"},Q={class:"main-container"},Z={class:"main-top-card card"},K={class:"card-body d-flex",style:{"justify-content":"space-between"}},W={class:"card-title"},X={class:"d-flex",style:{"justify-content":"flex-end"}},Y={class:"icon-filter"},tt={key:0},st={class:"row gx-3"},et={class:"card main-card"},at=["alt","src"],ot={class:"card-body"},it={class:"card-title"},ct=P(()=>s("div",null,[s("button",{class:"btn btn-success w-100 btn-more"},[s("span",null,"\u041F\u0435\u0440\u0435\u0439\u0442\u0438")])],-1)),nt={key:1},rt={key:0,class:"row gx-3"},lt={key:0,class:"card main-card"},dt=["src","alt"],_t={class:"card-body"},ht={class:"card-title"},ut={class:"card-price"},gt={key:0},yt={key:1},pt={key:0,class:"btn-dis"},mt=["onClick"],ft=P(()=>s("span",null,"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u044C",-1)),vt={key:1,class:"row gx-3"},bt={class:"container"},wt={style:{"font-weight":"normal"}};function Ct(t,n,i,m,c,l){const u=y("Title"),_=y("Meta"),F=G,S=y("b-icon-funnel"),g=J,j=y("b-icon-basket3"),x=q;return a(),o("div",E,[r(u,null,{default:h(()=>[v("Jalyuzi.uz - "+d(c.category_name)+" \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435 \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0433.\u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435 \u0446\u0435\u043D\u044B \u0438 \u0430\u0434\u0440\u0435\u0441\u0430 ",1)]),_:1}),r(_,{name:"description",content:c.category_name+"\u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435 \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0433.\u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435 \u0446\u0435\u043D\u044B \u0438 \u0430\u0434\u0440\u0435\u0441\u0430 Jalyuzi"},null,8,["content"]),r(_,{name:"keywords",content:"\u0416\u0430\u043B\u044E\u0437\u0438 \u0432 \u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435, \u043A\u0443\u043F\u0438\u0442\u044C \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435, \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0443\u0437\u0431\u0435\u043A\u0438\u0441\u0442\u0430\u043D\u0435, \u0436\u0430\u043B\u044E\u0437\u0438 \u0443\u0437, \u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0441\u0442\u0432\u043E \u0438 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0436\u0430\u043B\u044E\u0437\u0435\u0439 \u0432 \u0422\u0430\u0448\u043A\u0435\u043D\u0442\u0435, \u0444\u043E\u0442\u043E \u0436\u0430\u043B\u044E\u0437\u0438 \u0432 \u0442\u0430\u0448\u043A\u0435\u043D\u0442\u0435, jalyuzi, jalyuzi uz, jalyuzi pardalar"}),s("div",H,[s("div",L,[r(F,{showFilter:c.showFilterStatus,is_sub:!1,onGetCategoryProductsOn:l.getCategoryProductsOn,onCloseFilter:l.closeFilter,onChangeMyProducts:l.changeMyProducts},null,8,["showFilter","onGetCategoryProductsOn","onCloseFilter","onChangeMyProducts"])]),s("div",R,[s("section",$,[s("div",Q,[s("div",Z,[s("div",K,[s("h4",W,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 - "+d(c.category_name),1),s("div",X,[s("div",Y,[s("a",{onClick:n[0]||(n[0]=(...e)=>l.showFilter&&l.showFilter(...e))},[r(S,{class:""})])])])])]),c.subcategory_status?(a(),o("div",tt,[s("div",st,[(a(!0),o(w,null,C(c.subcategories,e=>(a(),o("div",{class:"col-md-3 col-6 col-sm-4",key:e.id},[s("div",et,[r(g,{to:"subcategory/"+e.id,class:"me-auto ms-auto nav-link"},{default:h(()=>[s("img",{alt:e.name,src:e.image,class:"card-img"},null,8,at)]),_:2},1032,["to"]),s("div",ot,[r(g,{to:"subcategory/"+e.id,class:"me-auto ms-auto nav-link"},{default:h(()=>[s("h4",it,d(e.name),1),ct]),_:2},1032,["to"])])])]))),128))])])):(a(),o("div",nt,[c.is_data?(a(),o("div",rt,[(a(!0),o(w,null,C(c.category_products,e=>(a(),o("div",{class:"col-md-3 col-6 col-sm-4",key:e.id},[e.status?(a(),o("div",lt,[r(g,{to:{name:"product-id",params:{id:e.slug}},class:"me-auto ms-auto"},{default:h(()=>[s("img",{src:t.baseUrl+e.image,class:"card-img",alt:e.name},null,8,dt)]),_:2},1032,["to"]),s("div",_t,[r(g,{to:{name:"product-id",params:{id:e.slug}},class:"nav-link"},{default:h(()=>[s("h4",ht,d(e.name)+" - "+d(e.weight),1),s("span",ut,d(e.price_sum)+" \u0441\u0443\u043C",1)]),_:2},1032,["to"]),s("div",null,[e.type_id?(a(),o("div",gt,[r(g,{to:{name:"product-id",params:{id:e.slug}},class:"btn-more w-100 btn btn-success"},{default:h(()=>[v(" \u041F\u0435\u0440\u0435\u0439\u0442\u0438 ")]),_:2},1032,["to"])])):(a(),o("div",yt,[e.inCart?(a(),o("div",pt,"\u041F\u0440\u043E\u0434\u0443\u043A\u0442 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0435")):(a(),o("button",{key:1,class:"btn btn-success w-100 btn-more",onClick:kt=>l.toBuy(e.slug)},[ft,v(),r(j,{class:"basket3-icon pb-1"})],8,mt))]))])])])):k("",!0)]))),128)),c.showPagination?(a(),B(x,{key:0,item:t.page_size_c,total:t.total_c,onPageChanged:l.loadProducts},null,8,["item","total","onPageChanged"])):k("",!0)])):(a(),o("div",vt,[s("div",bt,[s("h5",wt,d(c.not_product),1)])]))]))])])])])])}const St=I(A,[["render",Ct],["__scopeId","data-v-ffa62a1b"]]);export{St as default};
