import{a as F,D as S,l as k,m as P,p as b,P as u,j as x,r as y,o,b as a,e as t,f as l,t as _,F as I,s as j,G as v,I as N,w as g,k as w,v as B,z as D,B as T,C as V}from"./entry.5dbf4d12.js";import{_ as q}from"./Pagination.368333bd.js";const z={data(){return{is_product:!1,not_product:"\u041F\u0440\u043E\u0434\u0443\u043A\u0442\u044B \u043D\u0435\u0442",height:"150",width:"100",overall_price:"",showFilterStatus:!1}},computed:{getId(){return S().params.id},...k(u,v),...P(u,["getData","is_data","total_s","page_size_s","baseUrl"])},created(){this.getSubCategoryProducts(this.getId,1),this.fetchCatalogs("subcategory")},methods:{...b(u,["getSubCategoryProducts","addToCart","increaseCart"]),...b(v,["fetchCatalogs"]),closeFilter(){this.showFilterStatus=!this.showFilterStatus},loadProducts(s){u().getSubCategoryProducts(this.getId,s),this.$router.push({path:"",query:{page:s}})},showFilter(){this.showFilterStatus=!this.showFilterStatus},async getProduct(s){const{data:n}=await x(`${this.baseUrl}/api/product/${s}`,{initialCache:!1},"$1LNrqx1Bf6");return n.value.inCart=!0,this.getSubCategoryProducts(),n.value},toBuy(s){let n=this.getProduct(s),i;n.then(m=>{i=m;let h=parseInt(i.price_sum),c=this.width/100*(this.height/100);if(this.overall_price=parseInt(h*c),i.type_id==!0){let r={id:i.id,width:this.width/100,height:this.height/100,overall_price:this.overall_price,type_id:i.type_id},d=JSON.stringify(r);this.increaseCart(),this.addToCart(d,i.id)}else{let r={id:i.id,width:this.width/100,height:this.height/100,overall_price:this.overall_price,type_id:"None"},d=JSON.stringify(r);this.increaseCart(),this.addToCart(d,i.id)}})}}},L=s=>(T("data-v-09b42b36"),s=s(),V(),s),U={id:"subcategory"},$={class:"row gx-0"},J={class:"col-lg-3"},O={class:"col-lg-9"},A={class:"main"},E={class:"main-container"},G={class:"main-top-card card"},R={class:"card-body d-flex",style:{"justify-content":"space-between"}},H={style:{width:"100%"}},K={class:"card-title"},M={class:"d-flex",style:{"justify-content":"flex-end"}},Q={class:"icon-filter"},W={key:0,class:"row gx-3"},X={key:0,class:"card main-card"},Y=["src","alt"],Z={class:"card-body"},tt={class:"card-title"},st={class:"card-price"},et={key:0},ot={key:1},at={key:0,class:"btn-dis"},it=["onClick"],nt=L(()=>t("span",null,"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u044C",-1)),ct={key:1,class:"row gx-3"},lt={class:"container"},rt={style:{"font-weight":"normal"}};function dt(s,n,i,m,h,c){const r=N,d=y("b-icon-funnel"),p=D,f=y("b-icon-basket3"),C=q;return o(),a("div",U,[t("div",$,[t("div",J,[l(r,{showFilter:h.showFilterStatus,is_sub:!0,onCloseFilter:c.closeFilter},null,8,["showFilter","onCloseFilter"])]),t("div",O,[t("section",A,[t("div",E,[t("div",G,[t("div",R,[t("div",H,[t("h4",K,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 - "+_(s.category_name),1),t("div",M,[t("div",Q,[t("a",{onClick:n[0]||(n[0]=(...e)=>c.showFilter&&c.showFilter(...e))},[l(d,{class:""})])])])])])]),s.is_data?(o(),a("div",W,[(o(!0),a(I,null,j(s.getData,e=>(o(),a("div",{class:"col-md-3 col-6 col-sm-4 mt-3",key:e.id},[e.status?(o(),a("div",X,[l(p,{to:{name:"product-id",params:{id:e.slug}},class:"me-auto ms-auto"},{default:g(()=>[t("img",{src:s.baseUrl+e.image,class:"card-img",alt:e.name},null,8,Y)]),_:2},1032,["to"]),t("div",Z,[l(p,{to:{name:"product-id",params:{id:e.slug}},class:"nav-link"},{default:g(()=>[t("h4",tt,_(e.name)+" - "+_(e.weight),1),t("span",st,_(e.price_sum)+" \u0441\u0443\u043C",1)]),_:2},1032,["to"]),t("div",null,[e.type_id?(o(),a("div",et,[l(p,{to:{name:"product-id",params:{id:e.slug}},class:"btn-more w-100 btn btn-success"},{default:g(()=>[w(" \u041F\u0435\u0440\u0435\u0439\u0442\u0438 ")]),_:2},1032,["to"])])):(o(),a("div",ot,[e.inCart?(o(),a("div",at,"\u041F\u0440\u043E\u0434\u0443\u043A\u0442 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0435")):(o(),a("button",{key:1,class:"btn btn-success w-100 btn-more",onClick:_t=>c.toBuy(e.slug)},[nt,w(),l(f,{class:"basket3-icon pb-1"})],8,it))]))])])])):B("",!0)]))),128)),l(C,{item:s.page_size_s,total:s.total_s,onPageChanged:c.loadProducts},null,8,["item","total","onPageChanged"])])):(o(),a("div",ct,[t("div",lt,[t("h5",rt,_(h.not_product)+" :(",1)])]))])])])])])}const pt=F(z,[["render",dt],["__scopeId","data-v-09b42b36"]]);export{pt as default};
